{% extends "base.html" %}
{% load static %}

{% block extra_css %}
{% endblock %}

{% block content %}
  <div class="content-container p-4 rounded shadow-sm">
    {% if messages %}
      {% for message in messages %}
        <div
          class="alert 
            {% if message.level_tag == 'error' %}alert-danger
            {% elif message.level_tag == 'success' %}alert-success
            {% elif message.level_tag == 'warning' %}alert-warning
            {% elif message.level_tag == 'info' %}alert-info
            {% else %}alert-secondary{% endif %}
            alert-dismissible fade show"
          role="alert"
        >
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Fechar"></button>
        </div>
      {% endfor %}
    {% endif %}

    <h2>Importar Relat√≥rio XML</h2>
    <form method="post" enctype="multipart/form-data" id="upload-form">
      {% csrf_token %}
      <div id="drop-area" style="border:2px dashed #ccc; padding:4rem; min-height: 300px; font-size:1.25rem; text-align:center; margin-bottom:1rem;">
        <p>Arraste e solte seus arquivos XML aqui ou clique para selecionar</p>
        <input 
          type="file" 
          id="fileElem" 
          name="xml_file" 
          accept=".xml" 
          multiple 
          style="display:none;"
        >
        <button 
          type="button" 
          class="btn btn-primary" 
          onclick="document.getElementById('fileElem').click();"
        >
          Selecionar Arquivos
        </button>
        <div id="file-list" style="margin-top:1rem;"></div>
      </div>

      <div class="d-flex justify-content-end gap-2">
        <button type="submit" class="btn btn-success">Importar</button>
        <a href="{% url 'buy-orders-list' %}" class="btn btn-secondary">Voltar</a>
      </div>
    </form>
  </div>
{% endblock %}

{% block extra_js %}
  <script src="{% static 'js/buy_orders_import_xml.js' %}"></script>
{% endblock %}